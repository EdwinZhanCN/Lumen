[build-system]
requires = ["setuptools>=61.0", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "lumen-clip"
version = "0.1.0"
description = "Lumen, Python Machine Learning (PML) module for Lumilio Photos"
readme = "README.md"
requires-python = ">=3.10"
dependencies = [
    "open-clip-torch",
    "timm",
    "pillow",
    "grpcio",
    "grpcio-tools",
    "protobuf",
    "numpy",
    "python-dotenv",
    "importlib-resources",
    "colorama",
    "pygbif",
    "zeroconf",
    "torch>=2.1.0",
    "torchvision>=0.16.0",
    "torchaudio>=2.1.0",
    "onnxruntime>=1.16.0",
    "lumen-resources @ git+https://xget.xi-xu.me/gh/EdwinZhanCN/Lumen.git@main#subdirectory=lumen-resources"
    # "lumen-resources @ git+https://github.com/EdwinZhanCN/Lumen.git@main#subdirectory=lumen-resources"
]

[project.optional-dependencies]
cpu = [
    "torch>=2.1.0",
    "torchvision>=0.16.0",
    "torchaudio>=2.1.0",
    "onnxruntime>=1.16.0",
]

cuda = [
    "torch>=2.1.0",
    "torchvision>=0.16.0",
    "torchaudio>=2.1.0",
    "onnxruntime-gpu>=1.16.0",
]

mps = [
    "torch>=2.1.0",
    "torchvision>=0.16.0",
    "torchaudio>=2.1.0",
    "onnxruntime>=1.16.0",
]

openvino2404 = [
    "torch>=2.1.0",
    "torchvision>=0.16.0",
    "torchaudio>=2.1.0",
    "onnxruntime-openvino==1.20.0",
]

jp61 = [
    "torch==2.3.0",
    "torchvision==0.18.0",
    "torchaudio==2.3.0",
    "onnxruntime-gpu==1.18.0",
]

[tool.setuptools.packages.find]
where = ["src"]

[tool.setuptools.package-data]
image_classification = ["*.json"]

[[tool.pydoc-markdown.loaders]]
type = "python"
search_path = ["./src"]

[tool.pydoc-markdown.renderer]
type = "mkdocs"

[[tool.pydoc-markdown.renderer.pages]]
title = "API 文档"
name = "index"
contents = ["proto.*"]
