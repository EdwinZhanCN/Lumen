# generated by datamodel-codegen:
#   filename:  face_v1.json
#   timestamp: 2025-11-09T13:37:07+00:00

from __future__ import annotations

from pydantic import BaseModel, ConfigDict, Field, RootModel


class BboxItem(RootModel[float]):
    root: float = Field(..., ge=0.0)


class LandmarkItem(RootModel[float]):
    root: float = Field(..., ge=0.0)


class Landmark(RootModel[list[LandmarkItem]]):
    root: list[LandmarkItem] = Field(..., max_length=2, min_length=2)


class Face(BaseModel):
    model_config = ConfigDict(
        extra='allow',
    )
    bbox: list[BboxItem] = Field(..., max_length=4, min_length=4)
    """
    Bounding box coordinates [x1, y1, x2, y2]
    """
    confidence: float = Field(..., ge=0.0, le=1.0)
    """
    Detection confidence score
    """
    landmarks: list[Landmark] | None = None
    """
    Facial landmark points (optional)
    """


class EmbeddingItem(RootModel[float]):
    root: float = Field(..., ge=-1.0, le=1.0)


class Embedding(RootModel[list[EmbeddingItem]]):
    root: list[EmbeddingItem] = Field(..., max_length=2048, min_length=1)
    """
    Face embedding vector
    """


class FaceV1(BaseModel):
    """
    Universal schema for face detection and embedding responses across Lumen services
    """

    model_config = ConfigDict(
        extra='allow',
    )
    faces: list[Face]
    """
    Detected faces with bounding boxes and metadata
    """
    count: int = Field(..., ge=0)
    """
    Number of detected faces
    """
    model_id: str = Field(..., max_length=100, min_length=1)
    """
    Model identifier
    """
    embeddings: list[Embedding] | None = None
    """
    Face embeddings corresponding to detected faces (optional)
    """
    embedding_dim: int | None = Field(None, ge=1, le=2048)
    """
    Embedding dimension (required if embeddings provided)
    """
