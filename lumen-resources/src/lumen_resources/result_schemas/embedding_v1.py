# generated by datamodel-codegen:
#   filename:  embedding_v1.json
#   timestamp: 2025-11-09T13:37:07+00:00

from __future__ import annotations

from pydantic import AwareDatetime, BaseModel, ConfigDict, Field, RootModel


class VectorItem(RootModel[float]):
    root: float = Field(..., ge=-1.0, le=1.0)


class EmbeddingV1(BaseModel):
    """
    Universal schema for embedding responses across all Lumen services (face, clip, ocr, etc.)
    """

    model_config = ConfigDict(
        extra='allow',
    )
    vector: list[VectorItem] = Field(..., max_length=2048, min_length=1)
    """
    Normalized embedding vector (typically [-1, 1] range for L2-normalized embeddings)
    """
    dim: int = Field(..., ge=1, le=2048)
    """
    Embedding dimension
    """
    model_id: str | None = Field(None, max_length=100, min_length=1)
    """
    Model identifier that generated the embedding
    """
    service_name: str | None = Field(None, pattern='^lumen-[a-z]+$')
    """
    Service name (e.g., 'lumen-face', 'lumen-clip', 'lumen-ocr')
    """
    timestamp: AwareDatetime | None = None
    """
    ISO 8601 timestamp of response generation
    """
